<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>YAML: anchors and multiline text | Andrey Nautilus blog</title><meta name=keywords content="yaml,GitHub Actions"><meta name=description content="&lsquo;>-&rsquo; and &lsquo;|&rsquo; for multiline text; &lsquo;&amp;id&rsquo; and &lsquo;*id&rsquo; for anchors; &lsquo;&#171;: *anchor&rsquo; to merge keys"><meta name=author content><link rel=canonical href=https://andreynautilus.github.io/posts/2025-09-06-yaml-anchors-multiline-text/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://andreynautilus.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andreynautilus.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andreynautilus.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://andreynautilus.github.io/apple-touch-icon.png><link rel=mask-icon href=https://andreynautilus.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://andreynautilus.github.io/posts/2025-09-06-yaml-anchors-multiline-text/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=text/javascript>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].a=e[o].a||[]).push(arguments)},e[o].l=1*new Date;for(var r=0;r<document.scripts.length;r++)if(document.scripts[r].src===s)return;i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym"),ym(99367858,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})</script><noscript><div><img src=https://mc.yandex.ru/watch/99367858 style=position:absolute;left:-9999px alt></div></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-S584PB390B"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S584PB390B")</script><link rel=stylesheet href=/css/global/builtin_icon.min.af7971272ac3da29f13218095878a0d6404d665d4c1192b7bfc4cc894d4eb76a.css integrity="sha256-r3lxJyrD2inxMhgJWHig1kBNZl1MEZK3v8TMiU1Ot2o=" as=style><link rel=stylesheet href=/css/global/card_tags.min.08b084a05dddb2ae47b67783718d65c42eecc00cfee8c93fc63800741d66cc86.css integrity="sha256-CLCEoF3dsq5HtneDcY1lxC7swAz+6Mk/xjgAdB1mzIY=" as=style><link rel=stylesheet href=/css/global/columns.min.ad3ed875afa77918f5cc0b00a353ef761e69cccbe846e275bea3a8411ef7bd31.css integrity="sha256-rT7Yda+neRj1zAsAo1Pvdh5pzMvoRuJ1vqOoQR73vTE=" as=style><meta property="og:url" content="https://andreynautilus.github.io/posts/2025-09-06-yaml-anchors-multiline-text/"><meta property="og:site_name" content="Andrey Nautilus blog"><meta property="og:title" content="YAML: anchors and multiline text"><meta property="og:description" content="‘>-’ and ‘|’ for multiline text; ‘&amp;id’ and ‘*id’ for anchors; ‘«: *anchor’ to merge keys"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-06T22:37:49+02:00"><meta property="article:modified_time" content="2025-09-06T22:37:49+02:00"><meta property="article:tag" content="yaml"><meta property="article:tag" content="GitHub Actions"><meta name=twitter:card content="summary"><meta name=twitter:title content="YAML: anchors and multiline text"><meta name=twitter:description content="&lsquo;>-&rsquo; and &lsquo;|&rsquo; for multiline text; &lsquo;&amp;id&rsquo; and &lsquo;*id&rsquo; for anchors; &lsquo;&#171;: *anchor&rsquo; to merge keys"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://andreynautilus.github.io/posts/"},{"@type":"ListItem","position":2,"name":"YAML: anchors and multiline text","item":"https://andreynautilus.github.io/posts/2025-09-06-yaml-anchors-multiline-text/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"YAML: anchors and multiline text","name":"YAML: anchors and multiline text","description":"\u0026lsquo;\u0026gt;-\u0026rsquo; and \u0026lsquo;|\u0026rsquo; for multiline text; \u0026lsquo;\u0026amp;id\u0026rsquo; and \u0026lsquo;*id\u0026rsquo; for anchors; \u0026lsquo;\u0026laquo;: *anchor\u0026rsquo; to merge keys","keywords":["yaml","GitHub Actions"],"articleBody":"YAML format is used in many config files, and here are a few tips to make your yaml files look nicer.\nMultiline text values YAML since version 1.1 (2005) support block indicators to control how parser should handle multiline text. See interactive demo.\nExamples:\n\u003e- means “treat single newline symbols ('\\n') as spaces (' '), and remove all newlines at the end” (useful to put long description in a yaml key).\n# yaml key: \u003e- very long text # python { \"key\": \"very long text\" } | means “keep newline symbols ('\\n') as they are” (useful when writing multiple commands in a workflow for GitHub Actions ).\n# yaml key: | command1 command2 command3 # python { \"key\": \"command1\\ncommand2\\ncommand3\\n\" } Anchors YAML since version 1.1 (2005) support anchors: a way to annotate a node for future reuse. \u0026anchor at the beginning of a node value declares an anchor, *anchor value is expanded as anchored node. Use YAML online parser for experimenting.\nExample:\n# original yaml first-key: \u0026config key: value list: - item1 - item2 second-key: *config # parsed yaml first-key: key: value list: - item1 - item2 second-key: key: value list: - item1 - item2 An anchor needs to be defined (\u0026anchor) before it can be referenced (*anchor). Anchors are useful when we need to repeat certain sections without copy-pasting them.\nRecently GitHub Actions added support of yaml anchors, but actionlint (a widely used linter for GitHub Actions) doesn’t support them yet.\nAnchor limitations Anchors are expanded as entire node, it’s impossible to add/remove/change keys of a dictionary or items in a list.\n# INVALID first-list: \u0026items - item1 - item2 second-list: *items - item3 # can't add items # INVALID first-list: \u0026mapping key1: value1 key2: value2 second-list: *mapping key3: value3 # can't add key/values If we need to extend a mapping, we can use “merge key” feature.\nMerge key Language-Independent Type It’s an optional feature proposed for YAML 1.1 to merge multiple mappings defined by anchors into one node (\u003c\u003c: *anchor).\nExample:\n# original yaml first-key: \u0026config key: value foo: bar second-key: \u0026addon abc: xyz target-1: \u003c\u003c: *config # add new key new-key: new value # override existing key key: another value target-2: # merge multiple mappings \u003c\u003c: [*config, *addon] # parsed yaml first-key: key: value foo: bar second-key: abc: xyz target-1: key: another value # overridden foo: bar new-key: new value # addede target-2: # combined key: value foo: bar abc: xyz Check your yaml framework for support. For example PyYaml and ruaml.yaml support merge keys.\nMerge key feature does not allow to merge lists.\nReferences YAML specs YAML Multiline cheatsheet YAML online parser ","wordCount":"436","inLanguage":"en","datePublished":"2025-09-06T22:37:49+02:00","dateModified":"2025-09-06T22:37:49+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://andreynautilus.github.io/posts/2025-09-06-yaml-anchors-multiline-text/"},"publisher":{"@type":"Organization","name":"Andrey Nautilus blog","logo":{"@type":"ImageObject","url":"https://andreynautilus.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andreynautilus.github.io/ accesskey=h title="Andrey Nautilus blog (Alt + H)"><img src=https://andreynautilus.github.io/apple-touch-icon.png alt aria-label=logo height=35>Andrey Nautilus blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://andreynautilus.github.io/links/ title=links><span>links</span></a></li><li><a href=https://andreynautilus.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://andreynautilus.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://github.com/AndreyNautilus/AndreyNautilus.github.io title=src><span>src</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://andreynautilus.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://andreynautilus.github.io/posts/>posts</a></div><h1 class="post-title entry-hint-parent">YAML: anchors and multiline text</h1><div class=post-meta><span title='2025-09-06 22:37:49 +0200 +0200'>September 6, 2025</span>&nbsp;·&nbsp;3 min</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#multiline-text-values>Multiline text values</a></li><li><a href=#anchors>Anchors</a><ul><li><a href=#anchor-limitations>Anchor limitations</a></li></ul></li><li><a href=#merge-key-language-independent-type>Merge key Language-Independent Type</a></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><p>YAML format is used in many config files, and here are a few tips to
make your yaml files look nicer.</p><h2 id=multiline-text-values>Multiline text values<a hidden class=anchor aria-hidden=true href=#multiline-text-values>#</a></h2><p>YAML since version 1.1 (2005) support <a href=https://yaml.org/spec/1.1/#id926836><em>block indicators</em></a>
to control how parser should handle multiline text.
See <a href=https://yaml-multiline.info/>interactive demo</a>.</p><p><a href="https://yaml-online-parser.appspot.com/?yaml=key-1%3A+%3E-%0A++very%0A++long%0A++text%0Akey-2%3A+%7C%0A++command1%0A++command2%0A++command3%0A&amp;type=python">Examples</a>:</p><p><code>>-</code> means &ldquo;treat single newline symbols (<code>'\n'</code>) as spaces (<code>' '</code>), and remove all newlines at the end&rdquo;
(useful to put long description in a yaml key).</p><div class=columns-container><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>  very
</span></span></span><span class=line><span class=cl><span class=sd>  long
</span></span></span><span class=line><span class=cl><span class=sd>  text</span><span class=w>
</span></span></span></code></pre></div></div><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># python</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;very long text&#34;</span> <span class=p>}</span>
</span></span></code></pre></div></div></div><p><code>|</code> means &ldquo;keep newline symbols (<code>'\n'</code>) as they are&rdquo; (useful when writing multiple commands
in a workflow for GitHub Actions ).</p><div class=columns-container><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>  command1
</span></span></span><span class=line><span class=cl><span class=sd>  command2
</span></span></span><span class=line><span class=cl><span class=sd>  command3</span><span class=w>
</span></span></span></code></pre></div></div><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># python</span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;key&#34;</span><span class=p>:</span> <span class=s2>&#34;command1</span><span class=se>\n</span><span class=s2>command2</span><span class=se>\n</span><span class=s2>command3</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=p>}</span>
</span></span></code></pre></div></div></div><h2 id=anchors>Anchors<a hidden class=anchor aria-hidden=true href=#anchors>#</a></h2><p>YAML since version 1.1 (2005) support <a href=https://yaml.org/spec/1.1/#id899912><em>anchors</em></a>:
a way to annotate a node for future reuse.
<code>&amp;anchor</code> at the beginning of a node value declares an anchor, <code>*anchor</code> value is expanded as anchored node.
Use <a href=https://yaml-online-parser.appspot.com/>YAML online parser</a> for experimenting.</p><p><a href="https://yaml-online-parser.appspot.com/?yaml=first-key%3A%20%26config%0A%20%20key%3A%20value%0A%20%20list%3A%0A%20%20%20%20-%20item1%0A%20%20%20%20-%20item2%0Asecond-key%3A%20%2Aconfig&amp;type=json">Example</a>:</p><div class=columns-container><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># original yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-key</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>list</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-key</span><span class=p>:</span><span class=w> </span><span class=cp>*config</span><span class=w>
</span></span></span></code></pre></div></div><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># parsed yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-key</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>list</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-key</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>list</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>item2</span><span class=w>
</span></span></span></code></pre></div></div></div><p>An anchor needs to be defined (<code>&amp;anchor</code>) before it can be referenced (<code>*anchor</code>).
Anchors are useful when we need to repeat certain sections without copy-pasting them.</p><p>Recently GitHub Actions <a href=https://github.com/actions/runner/issues/1182#issuecomment-3150797791>added support of yaml anchors</a>,
but <code>actionlint</code> (a widely used <a href=https://github.com/rhysd/actionlint>linter</a> for GitHub Actions)
<a href=https://github.com/rhysd/actionlint/issues/133>doesn&rsquo;t support</a> them yet.</p><h3 id=anchor-limitations>Anchor limitations<a hidden class=anchor aria-hidden=true href=#anchor-limitations>#</a></h3><p>Anchors are expanded as <em>entire node</em>, it&rsquo;s impossible to add/remove/change keys of a dictionary
or items in a list.</p><div class=columns-container><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># INVALID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-list</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;items</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>item1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>item2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-list</span><span class=p>:</span><span class=w> </span><span class=cp>*items</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>item3 </span><span class=w> </span><span class=c># can&#39;t add items</span><span class=w>
</span></span></span></code></pre></div></div><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># INVALID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-list</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;mapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key1</span><span class=p>:</span><span class=w> </span><span class=l>value1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key2</span><span class=p>:</span><span class=w> </span><span class=l>value2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-list</span><span class=p>:</span><span class=w> </span><span class=cp>*mapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key3</span><span class=p>:</span><span class=w> </span><span class=l>value3 </span><span class=w> </span><span class=c># can&#39;t add key/values</span><span class=w>
</span></span></span></code></pre></div></div></div><p>If we need to extend a <em>mapping</em>, we can use &ldquo;merge key&rdquo; feature.</p><h2 id=merge-key-language-independent-type>Merge key Language-Independent Type<a hidden class=anchor aria-hidden=true href=#merge-key-language-independent-type>#</a></h2><p>It&rsquo;s an <a href=https://yaml.org/type/merge.html>optional feature proposed</a> for YAML 1.1
to merge multiple mappings defined by anchors into one node (<code>&lt;&lt;: *anchor</code>).</p><p><a href="https://yaml-online-parser.appspot.com/?yaml=first-key%3A+%26config%0A++key%3A+value%0A++foo%3A+bar%0Asecond-key%3A+%26addon%0A++abc%3A+xyz%0Atarget-1%3A%0A++%3C%3C%3A+*config%0A++new-key%3A+new+value%0A++key%3A+another+value%0Atarget-2%3A%0A++%3C%3C%3A+%5B*config%2C+*addon%5D&amp;type=json">Example</a>:</p><div class=columns-container><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># original yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-key</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-key</span><span class=p>:</span><span class=w> </span><span class=cp>&amp;addon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>abc</span><span class=p>:</span><span class=w> </span><span class=l>xyz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>target-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>&lt;&lt;</span><span class=p>:</span><span class=w> </span><span class=cp>*config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># add new key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>new-key</span><span class=p>:</span><span class=w> </span><span class=l>new value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># override existing key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>another value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>target-2</span><span class=p>:</span><span class=w>  </span><span class=c># merge multiple mappings</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>&lt;&lt;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=cp>*config,</span><span class=w> </span><span class=cp>*addon]</span><span class=w>
</span></span></span></code></pre></div></div><div class=columns-content><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># parsed yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>first-key</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>second-key</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>abc</span><span class=p>:</span><span class=w> </span><span class=l>xyz</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>target-1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>another value </span><span class=w> </span><span class=c># overridden</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>new-key</span><span class=p>:</span><span class=w> </span><span class=l>new value </span><span class=w> </span><span class=c># addede</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>target-2</span><span class=p>:</span><span class=w>  </span><span class=c># combined</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>abc</span><span class=p>:</span><span class=w> </span><span class=l>xyz</span><span class=w>
</span></span></span></code></pre></div></div></div><p>Check your yaml framework for support. For example <code>PyYaml</code> and <code>ruaml.yaml</code> support merge keys.</p><p>Merge key feature does not allow to merge lists.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://yaml.org/>YAML specs</a></li><li><a href=https://yaml-multiline.info/>YAML Multiline cheatsheet</a></li><li><a href=https://yaml-online-parser.appspot.com/>YAML online parser</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://andreynautilus.github.io/tags/yaml/>yaml</a></li><li><a href=https://andreynautilus.github.io/tags/github-actions/>GitHub Actions</a></li></ul><nav class=paginav><a class=next href=https://andreynautilus.github.io/posts/2025-09-02-distributing-linux-so/><span class=title>Next »</span><br><span>Build linux shared libraries for distribution</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://andreynautilus.github.io/>Andrey Nautilus blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>