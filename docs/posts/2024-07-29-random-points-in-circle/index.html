<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Random points in circle with uniform distribution | Andrey Nautilus blog</title><meta name=keywords content="procedural generation"><meta name=description content="angle = random(); distance = R * sqrt(random())"><meta name=author content><link rel=canonical href=https://andreynautilus.github.io/posts/2024-07-29-random-points-in-circle/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://andreynautilus.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andreynautilus.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andreynautilus.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://andreynautilus.github.io/apple-touch-icon.png><link rel=mask-icon href=https://andreynautilus.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://andreynautilus.github.io/posts/2024-07-29-random-points-in-circle/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=text/javascript>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].a=e[o].a||[]).push(arguments)},e[o].l=1*new Date;for(var r=0;r<document.scripts.length;r++)if(document.scripts[r].src===s)return;i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym"),ym(99367858,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})</script><noscript><div><img src=https://mc.yandex.ru/watch/99367858 style=position:absolute;left:-9999px alt></div></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-S584PB390B"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S584PB390B")</script><link rel=stylesheet href=/css/global/card_tags.min.08b084a05dddb2ae47b67783718d65c42eecc00cfee8c93fc63800741d66cc86.css integrity="sha256-CLCEoF3dsq5HtneDcY1lxC7swAz+6Mk/xjgAdB1mzIY=" as=style><link rel=stylesheet href=/css/global/builtin_icon.min.af7971272ac3da29f13218095878a0d6404d665d4c1192b7bfc4cc894d4eb76a.css integrity="sha256-r3lxJyrD2inxMhgJWHig1kBNZl1MEZK3v8TMiU1Ot2o=" as=style><meta property="og:url" content="https://andreynautilus.github.io/posts/2024-07-29-random-points-in-circle/"><meta property="og:site_name" content="Andrey Nautilus blog"><meta property="og:title" content="Random points in circle with uniform distribution"><meta property="og:description" content="angle = random(); distance = R * sqrt(random())"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-29T18:54:08+02:00"><meta property="article:modified_time" content="2024-07-29T18:54:08+02:00"><meta property="article:tag" content="procedural generation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Random points in circle with uniform distribution"><meta name=twitter:description content="angle = random(); distance = R * sqrt(random())"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://andreynautilus.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Random points in circle with uniform distribution","item":"https://andreynautilus.github.io/posts/2024-07-29-random-points-in-circle/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Random points in circle with uniform distribution","name":"Random points in circle with uniform distribution","description":"angle = random(); distance = R * sqrt(random())","keywords":["procedural generation"],"articleBody":"We need to generate a random point in a circle with uniform distribution.\nA naive approach with polar coordinates by picking a random angle and a random distance doesn’t give uniform distribution - there are more points close to center and fewer points at the radius. This article has explanation and visualization.\nNaive approach: NNNN points Correct formula: NNNN points Monte-Carlo approach: NNNN points (NNNN attempts) Correct formula for polar coordinates In polar coordinates:\nangle = random(0, 2 * PI) distance = R * sqrt(random(0, 1)) Where R is the radius of the circle. And transformation to Cortesian coordinates:\nx = distance * cos(angle) y = distance * sin(angle) This article and StackOverflow threads give a mathematically correct explanation.\nMonte Carlo (multiple attempts) Another approach is to generate uniformly distributed random points in the bounding box of the circle and pick the first point that is inside the circle.\nWith random() being a uniformly random number, the naive approach for a point in a square:\nx = random() y = random() give uniformly distributed points. And x * x + y * y \u003c= R * R provides an easy test for point being inside the circle.\nObvious drawback - undefined number of attempts, but with uniformly distributed points the average amount of attempt should not be greater than 2 (on average we need 4 / PI attempts).\n","wordCount":"228","inLanguage":"en","datePublished":"2024-07-29T18:54:08+02:00","dateModified":"2024-07-29T18:54:08+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://andreynautilus.github.io/posts/2024-07-29-random-points-in-circle/"},"publisher":{"@type":"Organization","name":"Andrey Nautilus blog","logo":{"@type":"ImageObject","url":"https://andreynautilus.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andreynautilus.github.io/ accesskey=h title="Andrey Nautilus blog (Alt + H)"><img src=https://andreynautilus.github.io/apple-touch-icon.png alt aria-label=logo height=35>Andrey Nautilus blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://andreynautilus.github.io/links/ title=links><span>links</span></a></li><li><a href=https://andreynautilus.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://andreynautilus.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://github.com/AndreyNautilus/AndreyNautilus.github.io title=src><span>src</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://andreynautilus.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://andreynautilus.github.io/posts/>posts</a></div><h1 class="post-title entry-hint-parent">Random points in circle with uniform distribution</h1><div class=post-meta><span title='2024-07-29 18:54:08 +0200 +0200'>July 29, 2024</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>We need to generate a random point in a circle with uniform distribution.</p><p>A naive approach with polar coordinates by picking a random angle and a random distance
doesn&rsquo;t give uniform distribution - there are more points close to center and fewer points at the radius.
<a href=https://www.anderswallin.net/2009/05/uniform-random-points-in-a-circle-using-polar-coordinates/>This article</a>
has explanation and visualization.</p><style>.svg-row{display:flex;justify-content:center;align-items:flex-start;gap:20px;width:100%;max-width:900px;margin:10px auto}.svg-item{flex:1;display:flex;flex-direction:column;align-items:center;min-width:0}.svg-item .svg-container{width:100%;aspect-ratio:1/1;display:flex;align-items:center;justify-content:center}.svg-item svg{width:100%;height:100%;display:block;aspect-ratio:1/1;max-width:100%;max-height:100%}.svg-item p{font-size:.85em;margin-top:8px;margin-bottom:0;text-align:center;word-break:break-word}.svg-item p span{display:inline}</style><div class=svg-row><div class=svg-item><div class=svg-container><svg id="random_points" viewBox="0 0 300 300"/></div><p>Naive approach: <span id=random_points_num>NNNN</span> points</p></div><div class=svg-item><div class=svg-container><svg id="correct_formula_points" viewBox="0 0 300 300"/></div><p>Correct formula: <span id=correct_formula_num>NNNN</span> points</p></div><div class=svg-item><div class=svg-container><svg id="monte_carlo_points" viewBox="0 0 300 300"/></div><p>Monte-Carlo approach: <span id=monte_carlo_num>NNNN</span> points
(<span id=monte_carlo_attempts>NNNN</span> attempts)</p></div></div><script type=module>
const numPoints = 500;

function renderSVGPoints(svg, points) {
  const svgns = 'http://www.w3.org/2000/svg';

  // clear existing points
  while (svg.firstChild) {
    svg.removeChild(svg.firstChild);
  }

  // render points
  points.forEach(([x ,y]) => {
    let circle = document.createElementNS(svgns, 'circle');
    circle.setAttribute('cx', x);
    circle.setAttribute('cy', y);
    circle.setAttribute('r', 2);
    circle.setAttribute('style', 'fill: var(--primary)');
    svg.appendChild(circle);
  });
}

function generatePointsSimple(centerX, centerY, radius, amount) {
  let result = [];
  for (let i = 0; i < amount; i++) {
    const angle = 2 * Math.PI * Math.random();
    const dist = radius * Math.random();

    const x = centerX + dist * Math.cos(angle);
    const y = centerY + dist * Math.sin(angle);
    result.push([x, y]);
  }
  return result;
}

function renderSVG_RandomPoints() {
  let svg = document.getElementById('random_points');

  const bbox = svg.viewBox.baseVal;
  const centerX = bbox.x + bbox.width / 2;
  const centerY = bbox.y + bbox.height / 2;
  const radius = Math.min(bbox.width, bbox.height) / 2;
  const points = generatePointsSimple(centerX, centerY, radius, numPoints);
  renderSVGPoints(svg, points);

  document.getElementById('random_points_num').innerText = `${numPoints}`;
}

document.getElementById('random_points').addEventListener('click', renderSVG_RandomPoints);
renderSVG_RandomPoints()

function generatePointsCorrectFormula(centerX, centerY, radius, amount) {
  let result = [];
  for (let i = 0; i < amount; i++) {
    const angle = 2 * Math.PI * Math.random();
    const dist = radius * Math.sqrt(Math.random());

    const x = centerX + dist * Math.cos(angle);
    const y = centerY + dist * Math.sin(angle);
    result.push([x, y]);
  }
  return result;
}

function renderSVG_CorrectFormula() {
  let svg = document.getElementById('correct_formula_points');

  const bbox = svg.viewBox.baseVal;
  const centerX = bbox.x + bbox.width / 2;
  const centerY = bbox.y + bbox.height / 2;
  const radius = Math.min(bbox.width, bbox.height) / 2;
  const points = generatePointsCorrectFormula(centerX, centerY, radius, numPoints);
  renderSVGPoints(svg, points);

  document.getElementById('correct_formula_num').innerText = `${numPoints}`;
}

document.getElementById('correct_formula_points').addEventListener('click', renderSVG_CorrectFormula);
renderSVG_CorrectFormula();

function generatePointsMonteCarlo(centerX, centerY, radius, amount) {
  const radiusSq = radius * radius;

  let attempts = 0;
  let result = [];
  while (result.length < amount) {
    attempts++;
    const x = radius * 2 * (Math.random() - 0.5);
    const y = radius * 2 * (Math.random() - 0.5);

    const distToCenterSq = x * x + y * y;
    if (distToCenterSq < radiusSq) {
      result.push([
        centerX + x,
        centerY + y,
      ]);
    }
  }
  return [attempts, result];
}

function renderSVG_MonteCarlo() {
  let svg = document.getElementById('monte_carlo_points');

  const bbox = svg.viewBox.baseVal;
  const centerX = bbox.x + bbox.width / 2;
  const centerY = bbox.y + bbox.height / 2;
  const radius = Math.min(bbox.width, bbox.height) / 2;
  const [attempts, points] = generatePointsMonteCarlo(centerX, centerY, radius, numPoints);
  renderSVGPoints(svg, points);

  document.getElementById('monte_carlo_num').innerText = `${points.length}`;
  document.getElementById('monte_carlo_attempts').innerText = `${attempts}`;
}

document.getElementById('monte_carlo_points').addEventListener('click', renderSVG_MonteCarlo);
renderSVG_MonteCarlo();

</script><h2 id=correct-formula-for-polar-coordinates>Correct formula for polar coordinates<a hidden class=anchor aria-hidden=true href=#correct-formula-for-polar-coordinates>#</a></h2><p>In polar coordinates:</p><pre tabindex=0><code>angle = random(0, 2 * PI)
distance = R * sqrt(random(0, 1))
</code></pre><p>Where <code>R</code> is the radius of the circle. And transformation to Cortesian coordinates:</p><pre tabindex=0><code>x = distance * cos(angle)
y = distance * sin(angle)
</code></pre><p><a href=https://www.anderswallin.net/2009/05/uniform-random-points-in-a-circle-using-polar-coordinates/>This article</a>
and <a href=https://stackoverflow.com/questions/5837572/generate-a-random-point-within-a-circle-uniformly>StackOverflow threads</a>
give a mathematically correct explanation.</p><h2 id=monte-carlo-multiple-attempts>Monte Carlo (multiple attempts)<a hidden class=anchor aria-hidden=true href=#monte-carlo-multiple-attempts>#</a></h2><p>Another approach is to generate uniformly distributed random points in the bounding box of the circle
and pick the first point that is inside the circle.</p><p>With <code>random()</code> being a uniformly random number, the naive approach for a point in a square:</p><pre tabindex=0><code>x = random()
y = random()
</code></pre><p>give uniformly distributed points. And <code>x * x + y * y &lt;= R * R</code> provides an easy test for
point being inside the circle.</p><p>Obvious drawback - undefined number of attempts, but with uniformly distributed points the average
amount of attempt should not be greater than 2 (on average we need <code>4 / PI</code> attempts).</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andreynautilus.github.io/tags/procedural-generation/>procedural generation</a></li></ul><nav class=paginav><a class=prev href=https://andreynautilus.github.io/posts/2024-12-24-gitignore-global/><span class=title>« Prev</span><br><span>Global .gitignore</span>
</a><a class=next href=https://andreynautilus.github.io/posts/2024-07-21-evenly-random-points-on-plane/><span class=title>Next »</span><br><span>Evenly distributed random points</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://andreynautilus.github.io/>Andrey Nautilus blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>